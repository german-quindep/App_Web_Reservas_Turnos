      <!--PDF--->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
  <script src="https://unpkg.com/jspdf-autotable"></script>
<div class="container py-4">
<div class="container">
    <h4 class="text text-primary text-center">Generador de Informes de Facturas</h4>
    <div class="row">
        <div class="col-md-4">
            <form action="/admin/informe" method="POST">
                <div class="form-group">
                    <div class="input-group">
                        <label for="Fecha_Inicio">Fecha Inicio:</label>
                        <input type="date" class="form-control" name="Fecha_Inicio" id="fecha_i" placeholder="Fecha inicio"
                            autofocus>
                    </div>
                    <div class="input-group">
                        <label for="Fecha_Fin">Fecha Fin:</label>
                        <input type="date" class="form-control" name="Fecha_Fin" id="fecha_f" placeholder="Fecha fin" autofocus>
                        <button type="submit" class="btn btn-success float-right" id="btnBuscar" title="Buscar">
                            <i class="fas fa-x2 fa-search" style="color: #000;"></i>
                        </button>
                    </div>
                </div>
        </div>
        </form>
    </div>
</div>
<!--MOSTRANDO EL INFORME-->
{{#if facturas}}
<div id="pdf">
<div class="container" >
    <div class="row">
        <div class="col-md-12">
            <img src="/img/Logo.jpeg" alt="Logo"class="mx-auto d-block m-4" style="width: 30%;">         
            <button type="submit" class="btn btn-primary float-right" id="btnSumar" title="Sumar"><i class="fas fa-x2 fa-coins"style="color:#ffff;"></i></button>
             <button type="submit" class="btn btn-success float-right" id="btnGenerar"><i class="far fa-x2 fa-file-alt" style="color:#ffff;">Generar Informe</i></button>          
        </div>
    </div>
</div>
{{else}}

{{/if}}
<div class="container">
    <div class="row">
        <table class="table table-bordered" id="tabla">
            <thead class="thead-white text-center">
                <tr>
                    <th colspan="5">Informe Generado</th>
                </tr>
            </thead>
            <thead class="thead-dark ">
                <tr>
                    <th scope="col">Fecha</th>
                    <th scope="col">Descipcion</th>
                    <th scope="col">Empleado</th>
                    <th scope="col">Cliente</th>
                    <th scope="col">Pago</th>
                </tr>
            </thead>
            {{#each facturas}}
            <tbody>
                <tr>
                    <th scope="row">{{#niceDate Fecha}}{{/niceDate}}</th>
                    <td>{{Descripcion}}</td>
                    <td>{{id_Empleado}}</td>
                    <td>{{id_Reserva}}</td>
                    <td class="total">{{Total_Pagar}}</td>
                </tr>
            </tbody>
            {{else}}
            <tbody>
                <tr>
                    <td><b>No hay Informe por generar</b></td>
                </tr>
            </tbody>
            {{/each}}
            <tfoot>
                <tr class="total">
                    <td ><b>Ganancia Total:</b></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="mostrarT"></td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
</div>
</div>
<script>

    const btn = document.querySelector('#btnSumar');
    const btnGenerar= document.querySelector('#btnGenerar');
    const btnBuscar= document.querySelector('#btnBuscar');

    btn.addEventListener('click', (e) => {
        CalcularTotal(e);
    });
    //TOTAL DEL INFORME
    function CalcularTotal(e) {
        var totalI = 0;
        $(".total").each(function () {
            totalI += parseInt($(this).html()) || 0;
        });
        $('.mostrarT').html('$'+totalI);
    }
    //PARA HACER EL PDF
    btnGenerar.addEventListener('click',()=>{
        pruebaDivAPdf();
    });
     function pruebaDivAPdf() {
         var doc = new jsPDF();
        doc.autoTable({html:'#tabla'}) 
        doc.save('informe.pdf');
     }
     
</script>